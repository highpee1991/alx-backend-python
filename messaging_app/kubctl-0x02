#!/bin/bash

set -e

echo "ðŸš€ Deploying Blue version..."
kubectl apply -f blue_deployment.yaml

echo "ðŸš€ Deploying Green version..."
kubectl apply -f green_deployment.yaml

echo "ðŸš€ Applying Service..."
kubectl apply -f kubeservice.yaml

echo "ðŸ“œ Checking logs of Green version..."
GREEN_POD=$(kubectl get pods -l app=messaging-app,version=green -o jsonpath="{.items[0].metadata.name}")
kubectl logs $GREEN_POD
